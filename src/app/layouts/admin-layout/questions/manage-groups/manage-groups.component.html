<!-- manage-groups.component.html -->

<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card h-100">
          <div class="card-header card-header-success form-container" style="display: flex;flex-direction: column;align-items: center;">
            <h2 class="card-title">Manage Questoins Group</h2>
            <p class="card-category">View and Manage Questions and Groups</p>
          </div>

          <div class="form-container" style="min-height: 600px;">
            <p-toolbar styleClass="mb-4 ml-2 mr-2 mt-4 gap-2">
              <ng-template pTemplate="left">
                <button pButton pRipple label="New Question Group" icon="pi pi-plus" class="p-button-success mr-2" [routerLink]="['add']"></button>
              </ng-template>
              <ng-template pTemplate="right">
                <!-- Add any additional buttons or controls as needed -->
              </ng-template>
            </p-toolbar>

            <p-table
              #dt
              class="custom-table"
              [value]="groups"
              [(selection)]="selectedGroups"
              dataKey="id"
              [rowHover]="true"
              [rows]="10"
              [showCurrentPageReport]="true"
              [rowsPerPageOptions]="[10, 25, 50]"
              [loading]="loading"
              [paginator]="true"
              currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
              [filterDelay]="0"
              [resizableColumns]="true"
              [tableStyle]="{'min-height': '100%'}"
              [globalFilterFields]="['groupName', 'desc', 'totalQuestionsCount', 'createdDate']"
            >
              <ng-template pTemplate="caption">
                <!-- <div class="table-header" style="display: flex;justify-content: space-between;">
                  <div class="table-header" style="width: 60%;">
                    List of Groups
                  </div>
                
                  <mat-form-field appearance="fill" floatLabel="never" style="width: 40%;">
                    <mat-label>Global Search</mat-label>
                    <input matInput (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                    <mat-icon matSuffix>search</mat-icon>
                  </mat-form-field>
                </div> -->
                <div class="table-header ml-2 mr-2 mt-2" style="display: flex;justify-content: space-between;">
                  <div class="left" style="width: 70%;">
                    List of Groups
                  </div>
  
                  <div class="right " style="width: 30%;">
                    <span class="p-input-icon-left" style="width: 100%;">
                      <i class="pi pi-search"></i>
                      <input
                      style="width: 100%;"
                        pInputText
                        type="text"
                        (input)="dt.filterGlobal($event.target.value, 'contains')"
                        placeholder="Search for a Group"
                      />
                    </span>
                  </div>
                  </div>
              </ng-template>

              <ng-template pTemplate="header">
                <tr>
                  <th style="width: 4rem">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                  </th>
                  <th pSortableColumn="groupName" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Question Group Name
                      <p-sortIcon field="groupName"></p-sortIcon>
                      <p-columnFilter type="text" field="groupName" display="menu" class="ml-auto"></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="desc" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Description
                      <p-sortIcon field="desc"></p-sortIcon>
                      <p-columnFilter type="text" field="desc" display="menu" class="ml-auto"></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="totalQuestionsCount" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Total Questions Count
                      <p-sortIcon field="totalQuestionsCount"></p-sortIcon>
                      <p-columnFilter type="text" field="totalQuestionsCount" display="menu" class="ml-auto"></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="createdDate" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Created Date
                      <p-sortIcon field="createdDate"></p-sortIcon>
                      <p-columnFilter type="text" field="createdDate" display="menu" class="ml-auto"></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="actions" style="min-width: 10rem">
                    <div class="flex justify-content-between align-items-center">
                      Actions
                      <p-sortIcon field="actions"></p-sortIcon>
                      <!-- Add any specific filters for actions if needed -->
                    </div>
                  </th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-group>
                <tr class="p-selectable-row">
                  <td>
                    <p-tableCheckbox [value]="group"></p-tableCheckbox>
                  </td>
                  <td>
                    <span class="p-column-title">Group Name</span>
                    {{ group.groupName }}
                  </td>
                  <td>
                    <span class="p-column-title">Description</span>
                    {{ group.desc }}
                  </td>
                  <td>
                    <span class="p-column-title">Total Questions Count</span>
                    {{ group.totalQuestionsCount }}
                  </td>
                  <td>
                    <span class="p-column-title">Created Date</span>
                    {{ group.createdDate }}
                  </td>
                  <td>
                    <button pButton type="button" class="p-button-success" icon="pi pi-search" (click)="viewGroup(group)">
                      <!-- View -->
                    </button>
                  </td>
                </tr>
              </ng-template>

              <!-- Other templates as needed -->
            </p-table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
