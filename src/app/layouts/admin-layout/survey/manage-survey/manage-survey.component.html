<div class="main-content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="card h-100">
            <div class="card-header card-header-success form-container" style="display: flex;flex-direction: column;align-items: center;">
              <h2 class="card-title">Manage Survey</h2>
              <p class="card-category">View and Create Surveys</p>
            </div>
  
            <div class="form-container" style="min-height: 600px;">
                <p-toolbar styleClass="mb-4 ml-2 mr-2 mt-4 gap-2">
                    <ng-template pTemplate="left">
                        <button pButton pRipple label="New Survey" icon="pi pi-plus" class="p-button-success mr-2" [routerLink]="['add']"></button>

                        <!-- <button pButton pRipple [label]="Delete" icon="pi pi-trash" class="p-button-danger" (click)="deleteSelectedProducts()" [disabled]="!selectedProducts || !selectedProducts.length"></button> -->
                    </ng-template>
                
                    <ng-template pTemplate="right">
                        <!-- <p-fileUpload mode="basic" accept="image/*" [maxFileSize]="1000000" label="Import" chooseLabel="Import" class="mr-2 inline-block"></p-fileUpload> -->
                        <button pButton pRipple label="Export Selected" icon="pi pi-upload" class="p-button-help" [disabled]="this.selectedSurveys.length==0"></button>
                    </ng-template>
                </p-toolbar>
              <p-table
                #dt
                class="custom-table"
                [value]="surveys"
                [(selection)]="selectedSurveys"
                dataKey="id"
                [rowHover]="true"
                [rows]="10"
                [showCurrentPageReport]="true"
                [rowsPerPageOptions]="[10, 25, 50]"
                [loading]="loading"
                [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [filterDelay]="0"
                [resizableColumns]="true"
                [tableStyle]="{'min-height': '100%'}"
                [globalFilterFields]="[
                  'surveyName',
                  'desc',
                  'senderID',
                  'welcomeText',
                  'startDate',
                  'endDate',
                  'endText',
                  'questionGroupName',
                  'totalParticipants',
                  'status'
                ]"
              >
              <ng-template pTemplate="caption">
                <div class="table-header ml-2 mr-2 mt-2" style="display: flex;justify-content: space-between;">
                <div class="left" style="width: 70%;">
                   List of Surveys
                </div>

                <div class="right " style="width: 30%;">
                  <span class="p-input-icon-left" style="width: 100%;">
                    <i class="pi pi-search"></i>
                    <input
                    style="width: 100%;"
                      pInputText
                      type="text"
                      (input)="dt.filterGlobal($event.target.value, 'contains')"
                      placeholder="Search for a survey"
                    />
                  </span>
                </div>
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width: 4rem">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                  </th>
                  <th pSortableColumn="surveyName" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Survey Name
                      <p-sortIcon field="surveyName"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="surveyName"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="desc" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Description
                      <p-sortIcon field="desc"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="desc"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="senderID" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Sender ID
                      <p-sortIcon field="senderID"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="senderID"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="welcomeText" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Welcome Text
                      <p-sortIcon field="welcomeText"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="welcomeText"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="startDate" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Start Date
                      <p-sortIcon field="startDate"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="startDate"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="endDate" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      End Date
                      <p-sortIcon field="endDate"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="endDate"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th pSortableColumn="endText" style="min-width: 14rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      End Text
                      <p-sortIcon field="endText"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="endText"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th
                    pSortableColumn="questionGroupName"
                    style="min-width: 14rem"
                  >
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Question Group Name
                      <p-sortIcon field="questionGroupName"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="questionGroupName"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                  <th
                    pSortableColumn="totalParticipants"
                    style="min-width: 14rem"
                  >
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Total Participants
                      <p-sortIcon field="totalParticipants"></p-sortIcon>
                      <p-columnFilter
                        type="text"
                        field="totalParticipants"
                        display="menu"
                        class="ml-auto"
                      ></p-columnFilter>
                    </div>
                  </th>
                
                  <th
                  pSortableColumn="status"
                  style="min-width: 14rem"
                >
                  <div
                    class="flex justify-content-between align-items-center"
                  >
                    status
                    <p-sortIcon field="status"></p-sortIcon>
                    <p-columnFilter
                      type="text"
                      field="status"
                      display="menu"
                      class="ml-auto"
                    ></p-columnFilter>
                  </div>
                </th>
                
                <th pSortableColumn="actions" style="min-width: 10rem">
                    <div
                      class="flex justify-content-between align-items-center"
                    >
                      Actions
                      <p-sortIcon field="actions"></p-sortIcon>
                      <!-- Add any specific filters for actions if needed -->
                    </div>
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-survey>
                <tr class="p-selectable-row">
                  <td>
                    <p-tableCheckbox [value]="survey"></p-tableCheckbox>
                  </td>
                  <td>
                    <span class="p-column-title">Survey Name</span>
                    {{ survey.surveyName }}
                  </td>
                  <td>
                    <span class="p-column-title">Description</span>
                    {{ survey.desc }}
                  </td>
                  <td>
                    <span class="p-column-title">Sender ID</span>
                    {{ survey.senderID }}
                  </td>
                  <td>
                    <span class="p-column-title">Welcome Text</span>
                    {{ survey.welcomeText }}
                  </td>
                  <td>
                    <span class="p-column-title">Start Date</span>
                    {{ survey.startDate }}
                  </td>
                  <td>
                    <span class="p-column-title">End Date</span>
                    {{ survey.endDate }}
                  </td>
                  <td>
                    <span class="p-column-title">End Text</span>
                    {{ survey.endText }}
                  </td>
                  <td>
                    <span class="p-column-title">Question Group Name</span>
                    {{ survey.questionGroupName }}
                  </td>

                  <td>
                    <span class="p-column-title">Total Participants</span>
                    {{ survey.totalParticipants }}
                  </td>
                  <td>
                    <span class="p-column-title">Status</span>
                    <p-tag [value]="survey.status" [severity]="getSeverity(survey.status)" styleClass="p-2"></p-tag>
                </td>
             
                  <td>
                    <button
                      pButton
                      type="button"
                      class="p-button-success"
                      icon="pi pi-search"
                      (click)="viewSurvey()"
                    >
                      <!-- View -->
                    </button>
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td colspan="11">No surveys found.</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
